# Background Configuration

This document details the format specifications for background configuration in the Quodsim 2D animation system, specifically focusing on the `backgroundMode` property in the `visualization` section of `core_animation.json`.

## Overview

The background configuration defines how the model background is rendered and displayed during animation playback. In the core animation file, this is primarily controlled through the `backgroundMode` property and related fields.

## Background Modes in Core Animation File

The animation system supports several background modes as specified in the `visualization` section:

```json
"visualization": {
  "backgroundMode": "svg", // Can be "svg", "image", "color", "transparent", "rendered"
  "svgPath": "diagram_layout.svg", // Path to the SVG for "svg" mode
  "backgroundImage": {
    "url": "process_diagram.png", // For "image" mode
    "width": 1200,
    "height": 800
  },
  "backgroundColor": "#f5f5f5" // For "color" mode
}
```

| Mode | Description | Required Properties |
|------|-------------|---------------------|
| `svg` | Use an SVG diagram as the background | `svgPath` |
| `image` | Use a raster image as the background | `backgroundImage` |
| `color` | Use a solid color background | `backgroundColor` |
| `transparent` | Use a transparent background | None |
| `rendered` | Render the background from model components | None |

## SVG Background

When using the `svg` mode, the background is rendered from an SVG file:

```json
"backgroundMode": "svg",
"svgPath": "diagram_layout.svg" // Path to the SVG file
```

The SVG file should contain the diagram's visual representation and can be generated by the diagramming tool (e.g., LucidChart).

## Image Background

When using the `image` mode, the background is rendered from an image:

```json
"backgroundMode": "image",
"backgroundImage": {
  "url": "process_diagram.png",
  "width": 1200,
  "height": 800
}
```

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `url` | string | Yes | URL or path to the background image |
| `width` | number | Yes | Width of the background image in pixels |
| `height` | number | Yes | Height of the background image in pixels |

## Color Background

When using the `color` mode, the background is a solid color:

```json
"backgroundMode": "color",
"backgroundColor": "#f5f5f5"
```

The `backgroundColor` is specified as a hex color code.

## Transparent Background

When using the `transparent` mode, the background is transparent:

```json
"backgroundMode": "transparent"
```

This is useful for overlaying the animation on other content.

## Rendered Background

When using the `rendered` mode, the background is rendered from model components:

```json
"backgroundMode": "rendered"
```

In this mode, the animation engine will render the background based on the model components defined in the `model` section of the core animation file.

## Extended Background Configuration

While the core animation file supports the basic background modes described above, animation engines may offer extended background configurations through additional visualization files referenced in the `references` section:

```json
"references": {
  "visualizationFiles": [
    {
      "type": "display",
      "path": "visualization/display_config.json"
    }
  ]
}
```

These external visualization files can provide more advanced background options like:

- Grid configurations
- Multiple layers
- Custom coordinate systems
- Interactive background elements
- Enhanced visual styling

The specific format for these extended configurations is detailed in separate documentation for the animation engine implementation.

## Example

Here's a complete example of background configuration in the core animation file:

```json
"visualization": {
  "backgroundMode": "svg",
  "svgPath": "diagrams/hospital_layout.svg",
  "canvasSize": {
    "width": 1600,
    "height": 900
  }
}
```

This configuration uses an SVG file (`hospital_layout.svg`) as the background for the animation, with a preferred canvas size of 1600Ã—900 pixels.
